{"version":3,"sources":["L.Control.Locate.js","ImprovedLocatorControl.js","App.js","reportWebVitals.js","serviceWorkerRegistration.js","LibreMap.js","Landing.js","SensorMap.js","klima/helper/filter.js","klima/helper/itemConverter.js","klima/helper/titleFactory.js","klima/MenuFooter.js","klima/version.js","klima/Menu.js","klima/SecondaryInfo.js","klima/KlimaorteMap.js","klima/App.js","index.js"],"names":["factory","window","exports","L","module","require","Control","Locate","LDomUtilApplyClassesMethod","method","element","classNames","split","forEach","className","DomUtil","call","this","addClasses","el","names","removeClasses","LocationMarker","Marker","extend","initialize","latlng","options","Util","setOptions","_latlng","createIcon","opt","style","undefined","color","weight","fillColor","fillOpacity","opacity","icon","_getIconSVG","_locationIcon","divIcon","html","svg","iconSize","w","h","setIcon","r","radius","s","s2","setStyle","CompassMarker","heading","_heading","setHeading","width","depth","path","svgstyle","LocateControl","position","layer","setView","keepCurrentZoomLevel","initialZoomLevel","getLocationBounds","locationEvent","bounds","flyTo","clickBehavior","inView","outOfView","inViewNotFollowing","returnToPrevBounds","cacheLocation","drawCircle","drawMarker","showCompass","markerClass","compassClass","circleStyle","markerStyle","compassStyle","followCircleStyle","followMarkerStyle","followCompassStyle","iconLoading","iconElementTag","textElementTag","circlePadding","metric","createButtonCallback","container","link","create","title","strings","role","href","text","textContent","classList","add","parentNode","display","length","onLocationError","err","control","console","log","navigator","geolocation","getCurrentPosition","e","enableHighAccuracy","timeout","alert","message","onLocationOutsideMapBounds","stop","outsideMapBoundsMsg","showPopup","metersUnit","feetUnit","popup","locateOptions","maxZoom","Infinity","watch","i","onAdd","map","_container","_map","_layer","LayerGroup","addTo","_event","_compassHeading","_prevBounds","linkAndIcon","_link","_icon","DomEvent","on","ev","stopPropagation","preventDefault","isTrusted","_onClick","_resetVariables","_unload","_justClicked","wasFollowing","_isFollowing","_userPanned","_userZoomed","_active","behaviors","behavior","getBounds","contains","flyToBounds","fitBounds","bind","f","start","_updateContainerStyle","_activate","_drawMarker","_deactivate","_cleanClasses","_removeMarker","stopFollowing","locate","fire","_onLocationFound","_onLocationError","_onDrag","_onZoom","_onZoomEnd","oriAbs","_this","deviceorientation","_onDeviceOrientation","DeviceOrientationEvent","requestPermission","then","permissionState","stopLocate","off","_isOutsideMapBounds","latitude","longitude","panTo","_ignoreEvent","padding","requestAnimFrame","_drawCompass","cStyle","_compass","setLatLng","removeFrom","accuracy","distance","unit","_circle","setRadius","circle","toFixed","mStyle","_marker","t","getPopupText","template","bindPopup","_popup","clearLayers","_setCompassHeading","angle","isNaN","parseFloat","isFinite","Math","round","_onCompassNeedsCalibration","webkitCompassHeading","absolute","alpha","code","lat","lng","pad","getLatLng","maxBounds","_setClasses","state","removeClass","props","startDirectly","context","_options","lc","setTimeout","leafletElement","MapControl","host","getGazData","setGazData","a","prefix","sources","md5FetchText","adressen","bezirke","quartiere","pois","kitas","gazData","getGazDataForTopicIds","backgroundModes","mode","layerKey","backgroundConfigurations","lbk","layerkey","layerkey_","src","stadtplan","vector","vector2","baseLayerConf","defaultLayerConf","namedLayers","cismetLight","type","pane","App","useState","useEffect","TopicMapContextProvider","TopicMapComponent","locatorControl","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","Boolean","location","hostname","match","Map","textOpacity","iconOpacity","mapContainer","useRef","zoom","current","maplibregl","center","getStyle","layers","setPaintProperty","id","addSource","tiles","tileSize","addLayer","source","paint","minzoom","property","addControl","NavigationControl","ref","Meta","Card","Landing","flexDirection","alignItems","justifyContent","margin","process","hoverable","cover","alt","description","itemFilterFunction","filterState","filterMode","item","themen","includes","thema","kategorien","cat","convertBPKlimaItemsToFeature","itemIn","addSVGToProps","standort","name","geometry","geojson","farbe","info","header","additionalInfo","beschreibung","subtitle","strasse","hausnummer","plz","stadt","url","website","bild","foto","selected","crs","properties","featureCollectionContext","getThemaById","result","items","find","themenstadtplanDesc","filteredItems","themenIds","push","join","Footer","setAppMenuActiveMenuSection","useContext","UIDispatchContext","fontSize","onClick","scroller","scrollTo","containerId","document","target","reactCismapVersion","rel","getFilterInfo","katValues","themenValues","kat","key","sort","b","localeCompare","k","MyMenu","FeatureCollectionContext","shownFeatures","FeatureCollectionDispatchContext","setFilterState","setFilterMode","filterConfiguration","filters","values","setAll","setNone","colorizer","configurableDocBlocks","getSimpleHelpForTM","content","configs","splice","bsStyle","contentBlockConf","Icon","CustomizationContextProvider","customizations","inKartePositionieren","listWithSymbols","fachobjekteAuswaehlen","furtherExplanationOfClickableContent","hintergrund","additionalDatasources","ModalApplicationMenu","menuIcon","menuTitle","menuFooter","MenuFooter","menuIntroduction","to","smooth","delay","menuSections","Section","sectionKey","sectionTitle","term","count","getFilterHeader","sectionBsStyle","sectionContent","FilterPanel","DefaultSettingsPanel","ConfigurableDocBlocks","NW","whiteSpace","children","InfoPanel","selectedFeature","angebot","footer","weitereAngebote","filter","testItem","addOffers","ang","subSections","SecondaryInfoPanelSection","paddingTop","bemerkung","kommentar","erreichbarkeit","first","border","xwidth","Object","keys","index","separator","colspan","paddingLeft","paddingright","borderBottom","paddingBottom","verticalAlign","val","minHeight4MainSextion","SecondaryInfo","titleIconName","mainSection","minHeight","paddingRight","float","dataHost","bpklimastandorte","KlimaorteMap","setSelectedFeatureByPredicate","lightBoxDispatchContext","LightBoxDispatchContext","zoomToFeature","TopicMapDispatchContext","history","TopicMapContext","handleShow","search","show","URLSearchParams","get","parseInt","feature","removeQueryPart","listen","moreDataAvailable","linkProductionEnabled","secondaryInfoBoxElements","InfoBoxFotoPreview","currentFeature","applicationMenuTooltipString","modalMenu","gazetteerSearchPlaceholder","infoBox","GenericInfoBoxFromFeature","pixelwidth","config","displaySecondaryInfoAction","city","noun","singular","plural","noCurrentFeatureTitle","noCurrentFeatureContent","secondaryInfo","gazetteerHitTrigger","hits","Array","isArray","more","check","FeatureCollection","appKey","featureTooltipFunction","featureItemsURL","referenceSystemDefinition","MappingConstants","proj4crs25832def","mapEPSGCode","referenceSystem","crs25832","getFeatureStyler","getGTMFeatureStyler","convertItemToFeature","clusteringOptions","iconCreateFunction","getClusterIconCreatorFunction","clusteringEnabled","titleFactory","classKeyFunction","getColorFromProperties","additionalLayerConfiguration","fernwaerme","textAlign","initialActive","StyledWMSTileLayer","format","tiled","transparent","ReactDOM","render","StrictMode","SensorMap","getElementById","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.28898aee.chunk.js","sourcesContent":["import L from \"leaflet\";\n\n/*!\nCopyright (c) 2016 Dominik Moritz\n\nThis file is part of the leaflet locate control. It is licensed under the MIT license.\nYou can find the project at: https://github.com/domoritz/leaflet-locatecontrol\n*/\n(function (factory, window) {\n  // see https://github.com/Leaflet/Leaflet/blob/master/PLUGIN-GUIDE.md#module-loaders\n  // for details on how to structure a leaflet plugin.\n\n  // define an AMD module that relies on 'leaflet'\n  //   if (typeof define === \"function\" && define.amd) {\n  //     define([\"leaflet\"], factory);\n\n  //     // define a Common JS module that relies on 'leaflet'\n  //   } else\n\n  if (typeof exports === \"object\") {\n    if (typeof window !== \"undefined\" && window.L) {\n      module.exports = factory(L);\n    } else {\n      module.exports = factory(require(\"leaflet\"));\n    }\n  }\n\n  // attach your plugin to the global 'L' variable\n  if (typeof window !== \"undefined\" && window.L) {\n    window.L.Control.Locate = factory(L);\n  }\n})(function (L) {\n  const LDomUtilApplyClassesMethod = (method, element, classNames) => {\n    classNames = classNames.split(\" \");\n    classNames.forEach(function (className) {\n      L.DomUtil[method].call(this, element, className);\n    });\n  };\n\n  const addClasses = (el, names) => LDomUtilApplyClassesMethod(\"addClass\", el, names);\n  const removeClasses = (el, names) => LDomUtilApplyClassesMethod(\"removeClass\", el, names);\n\n  /**\n   * Compatible with L.Circle but a true marker instead of a path\n   */\n  const LocationMarker = L.Marker.extend({\n    initialize(latlng, options) {\n      L.Util.setOptions(this, options);\n      this._latlng = latlng;\n      this.createIcon();\n    },\n\n    /**\n     * Create a styled circle location marker\n     */\n    createIcon() {\n      const opt = this.options;\n\n      let style = \"\";\n\n      if (opt.color !== undefined) {\n        style += `stroke:${opt.color};`;\n      }\n      if (opt.weight !== undefined) {\n        style += `stroke-width:${opt.weight};`;\n      }\n      if (opt.fillColor !== undefined) {\n        style += `fill:${opt.fillColor};`;\n      }\n      if (opt.fillOpacity !== undefined) {\n        style += `fill-opacity:${opt.fillOpacity};`;\n      }\n      if (opt.opacity !== undefined) {\n        style += `opacity:${opt.opacity};`;\n      }\n\n      const icon = this._getIconSVG(opt, style);\n\n      this._locationIcon = L.divIcon({\n        className: icon.className,\n        html: icon.svg,\n        iconSize: [icon.w, icon.h],\n      });\n\n      this.setIcon(this._locationIcon);\n    },\n\n    /**\n     * Return the raw svg for the shape\n     *\n     * Split so can be easily overridden\n     */\n    _getIconSVG(options, style) {\n      const r = options.radius;\n      const w = options.weight;\n      const s = r + w;\n      const s2 = s * 2;\n      const svg =\n        `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${s2}\" height=\"${s2}\" version=\"1.1\" viewBox=\"-${s} -${s} ${s2} ${s2}\">` +\n        '<circle r=\"' +\n        r +\n        '\" style=\"' +\n        style +\n        '\" />' +\n        \"</svg>\";\n      return {\n        className: \"leaflet-control-locate-location\",\n        svg,\n        w: s2,\n        h: s2,\n      };\n    },\n\n    setStyle(style) {\n      L.Util.setOptions(this, style);\n      this.createIcon();\n    },\n  });\n\n  const CompassMarker = LocationMarker.extend({\n    initialize(latlng, heading, options) {\n      L.Util.setOptions(this, options);\n      this._latlng = latlng;\n      this._heading = heading;\n      this.createIcon();\n    },\n\n    setHeading(heading) {\n      this._heading = heading;\n    },\n\n    /**\n     * Create a styled arrow compass marker\n     */\n    _getIconSVG(options, style) {\n      const r = options.radius;\n      const w = options.width + options.weight;\n      const h = (r + options.depth + options.weight) * 2;\n      const path = `M0,0 l${options.width / 2},${options.depth} l-${w},0 z`;\n      const svgstyle = `transform: rotate(${this._heading}deg)`;\n      const svg =\n        `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${w}\" height=\"${h}\" version=\"1.1\" viewBox=\"-${\n          w / 2\n        } 0 ${w} ${h}\" style=\"${svgstyle}\">` +\n        '<path d=\"' +\n        path +\n        '\" style=\"' +\n        style +\n        '\" />' +\n        \"</svg>\";\n      return {\n        className: \"leaflet-control-locate-heading\",\n        svg,\n        w,\n        h,\n      };\n    },\n  });\n\n  const LocateControl = L.Control.extend({\n    options: {\n      /** Position of the control */\n      position: \"topleft\",\n      /** The layer that the user's location should be drawn on. By default creates a new layer. */\n      layer: undefined,\n      /**\n       * Automatically sets the map view (zoom and pan) to the user's location as it updates.\n       * While the map is following the user's location, the control is in the `following` state,\n       * which changes the style of the control and the circle marker.\n       *\n       * Possible values:\n       *  - false: never updates the map view when location changes.\n       *  - 'once': set the view when the location is first determined\n       *  - 'always': always updates the map view when location changes.\n       *              The map view follows the user's location.\n       *  - 'untilPan': like 'always', except stops updating the\n       *                view if the user has manually panned the map.\n       *                The map view follows the user's location until she pans.\n       *  - 'untilPanOrZoom': (default) like 'always', except stops updating the\n       *                view if the user has manually panned the map.\n       *                The map view follows the user's location until she pans.\n       */\n      setView: \"untilPanOrZoom\",\n      /** Keep the current map zoom level when setting the view and only pan. */\n      keepCurrentZoomLevel: false,\n      /** After activating the plugin by clicking on the icon, zoom to the selected zoom level, even when keepCurrentZoomLevel is true. Set to 'false' to disable this feature. */\n      initialZoomLevel: false,\n      /**\n       * This callback can be used to override the viewport tracking\n       * This function should return a LatLngBounds object.\n       *\n       * For example to extend the viewport to ensure that a particular LatLng is visible:\n       *\n       * getLocationBounds: function(locationEvent) {\n       *    return locationEvent.bounds.extend([-33.873085, 151.219273]);\n       * },\n       */\n      getLocationBounds(locationEvent) {\n        return locationEvent.bounds;\n      },\n      /** Smooth pan and zoom to the location of the marker. Only works in Leaflet 1.0+. */\n      flyTo: false,\n      /**\n       * The user location can be inside and outside the current view when the user clicks on the\n       * control that is already active. Both cases can be configures separately.\n       * Possible values are:\n       *  - 'setView': zoom and pan to the current location\n       *  - 'stop': stop locating and remove the location marker\n       */\n      clickBehavior: {\n        /** What should happen if the user clicks on the control while the location is within the current view. */\n        inView: \"stop\",\n        /** What should happen if the user clicks on the control while the location is outside the current view. */\n        outOfView: \"setView\",\n        /**\n         * What should happen if the user clicks on the control while the location is within the current view\n         * and we could be following but are not. Defaults to a special value which inherits from 'inView';\n         */\n        inViewNotFollowing: \"inView\",\n      },\n      /**\n       * If set, save the map bounds just before centering to the user's\n       * location. When control is disabled, set the view back to the\n       * bounds that were saved.\n       */\n      returnToPrevBounds: false,\n      /**\n       * Keep a cache of the location after the user deactivates the control. If set to false, the user has to wait\n       * until the locate API returns a new location before they see where they are again.\n       */\n      cacheLocation: true,\n      /** If set, a circle that shows the location accuracy is drawn. */\n      drawCircle: true,\n      /** If set, the marker at the users' location is drawn. */\n      drawMarker: true,\n      /** If set and supported then show the compass heading */\n      showCompass: true,\n      /** The class to be used to create the marker. For example L.CircleMarker or L.Marker */\n      markerClass: LocationMarker,\n      /** The class us be used to create the compass bearing arrow */\n      compassClass: CompassMarker,\n      /** Accuracy circle style properties. NOTE these styles should match the css animations styles */\n      circleStyle: {\n        className: \"leaflet-control-locate-circle\",\n        color: \"#136AEC\",\n        fillColor: \"#136AEC\",\n        fillOpacity: 0.15,\n        weight: 0,\n      },\n      /** Inner marker style properties. Only works if your marker class supports `setStyle`. */\n      markerStyle: {\n        className: \"leaflet-control-locate-marker\",\n        color: \"#fff\",\n        fillColor: \"#2A93EE\",\n        fillOpacity: 1,\n        weight: 3,\n        opacity: 1,\n        radius: 9,\n      },\n      /** Compass */\n      compassStyle: {\n        fillColor: \"#2A93EE\",\n        fillOpacity: 1,\n        weight: 0,\n        color: \"#fff\",\n        opacity: 1,\n        radius: 9, // How far is the arrow is from the center of of the marker\n        width: 9, // Width of the arrow\n        depth: 6, // Length of the arrow\n      },\n      /**\n       * Changes to accuracy circle and inner marker while following.\n       * It is only necessary to provide the properties that should change.\n       */\n      followCircleStyle: {},\n      followMarkerStyle: {\n        // color: '#FFA500',\n        // fillColor: '#FFB000'\n      },\n      followCompassStyle: {},\n      /** The CSS class for the icon. For example fa-location-arrow or fa-map-marker */\n      icon: \"leaflet-control-locate-location-arrow\",\n      iconLoading: \"leaflet-control-locate-spinner\",\n      /** The element to be created for icons. For example span or i */\n      iconElementTag: \"span\",\n      /** The element to be created for the text. For example small or span */\n      textElementTag: \"small\",\n      /** Padding around the accuracy circle. */\n      circlePadding: [0, 0],\n      /** Use metric units. */\n      metric: true,\n      /**\n       * This callback can be used in case you would like to override button creation behavior.\n       * This is useful for DOM manipulation frameworks such as angular etc.\n       * This function should return an object with HtmlElement for the button (link property) and the icon (icon property).\n       */\n      createButtonCallback(container, options) {\n        const link = L.DomUtil.create(\"a\", \"leaflet-bar-part leaflet-bar-part-single\", container);\n        link.title = options.strings.title;\n        link.role = \"button\";\n        link.href = \"#\";\n        const icon = L.DomUtil.create(options.iconElementTag, options.icon, link);\n\n        if (options.strings.text !== undefined) {\n          const text = L.DomUtil.create(options.textElementTag, \"leaflet-locate-text\", link);\n          text.textContent = options.strings.text;\n          link.classList.add(\"leaflet-locate-text-active\");\n          link.parentNode.style.display = \"flex\";\n          if (options.icon.length > 0) {\n            icon.classList.add(\"leaflet-locate-icon\");\n          }\n        }\n\n        return { link, icon };\n      },\n      /** This event is called in case of any location error that is not a time out error. */\n      onLocationError(err, control) {\n        console.log(\"xxxy error\", err);\n        try {\n          const onSuccess = (e) => {\n            console.log(\"sucess\", e);\n          };\n          const onError = (e) => {\n            console.log(\"error\", e);\n          };\n          console.log(\n            \"try again\",\n            navigator.geolocation.getCurrentPosition(onSuccess, onError, {\n              enableHighAccuracy: true,\n              timeout: 1000,\n            })\n          );\n        } catch (e) {\n          console.log(\"e e e\", e);\n        }\n\n        alert(\"xxx\" + err.message);\n      },\n      /**\n       * This event is called when the user's location is outside the bounds set on the map.\n       * The event is called repeatedly when the location changes.\n       */\n      onLocationOutsideMapBounds(control) {\n        control.stop();\n        alert(control.options.strings.outsideMapBoundsMsg);\n      },\n      /** Display a pop-up when the user click on the inner marker. */\n      showPopup: true,\n      strings: {\n        title: \"Show me where I am\",\n        metersUnit: \"meters\",\n        feetUnit: \"feet\",\n        popup: \"You are within {distance} {unit} from this point\",\n        outsideMapBoundsMsg: \"You seem located outside the boundaries of the map\",\n      },\n      /** The default options passed to leaflets locate method. */\n      locateOptions: {\n        maxZoom: Infinity,\n        watch: true, // if you overwrite this, visualization cannot be updated\n        setView: false, // have to set this to false because we have to\n        // do setView manually\n      },\n    },\n\n    initialize(options) {\n      // set default options if nothing is set (merge one step deep)\n      for (const i in options) {\n        if (typeof this.options[i] === \"object\") {\n          L.extend(this.options[i], options[i]);\n        } else {\n          this.options[i] = options[i];\n        }\n      }\n\n      // extend the follow marker style and circle from the normal style\n      this.options.followMarkerStyle = L.extend(\n        {},\n        this.options.markerStyle,\n        this.options.followMarkerStyle\n      );\n      this.options.followCircleStyle = L.extend(\n        {},\n        this.options.circleStyle,\n        this.options.followCircleStyle\n      );\n      this.options.followCompassStyle = L.extend(\n        {},\n        this.options.compassStyle,\n        this.options.followCompassStyle\n      );\n    },\n\n    /**\n     * Add control to map. Returns the container for the control.\n     */\n    onAdd(map) {\n      const container = L.DomUtil.create(\n        \"div\",\n        \"leaflet-control-locate leaflet-bar leaflet-control\"\n      );\n      this._container = container;\n      this._map = map;\n      this._layer = this.options.layer || new L.LayerGroup();\n      this._layer.addTo(map);\n      this._event = undefined;\n      this._compassHeading = null;\n      this._prevBounds = null;\n\n      const linkAndIcon = this.options.createButtonCallback(container, this.options);\n      this._link = linkAndIcon.link;\n      this._icon = linkAndIcon.icon;\n\n      L.DomEvent.on(\n        this._link,\n        \"click\",\n        function (ev) {\n          //   alert(\"clicked \" + ev.isTrusted);\n          //   console.log(\"clicked\", ev.isTrusted);\n          L.DomEvent.stopPropagation(ev);\n          L.DomEvent.preventDefault(ev);\n          if (ev.isTrusted) {\n            this._onClick();\n          }\n        },\n        this\n      ).on(this._link, \"dblclick\", L.DomEvent.stopPropagation);\n\n      this._resetVariables();\n\n      this._map.on(\"unload\", this._unload, this);\n\n      return container;\n    },\n\n    /**\n     * This method is called when the user clicks on the control.\n     */\n    _onClick() {\n      this._justClicked = true;\n      const wasFollowing = this._isFollowing();\n      this._userPanned = false;\n      this._userZoomed = false;\n\n      if (this._active && !this._event) {\n        // click while requesting\n        this.stop();\n        alert(\"stopped\" + this._active + \".\" + this._event);\n      } else if (this._active) {\n        const behaviors = this.options.clickBehavior;\n        let behavior = behaviors.outOfView;\n        if (this._map.getBounds().contains(this._event.latlng)) {\n          behavior = wasFollowing ? behaviors.inView : behaviors.inViewNotFollowing;\n        }\n\n        // Allow inheriting from another behavior\n        if (behaviors[behavior]) {\n          behavior = behaviors[behavior];\n        }\n\n        switch (behavior) {\n          case \"setView\":\n            this.setView();\n            break;\n          case \"stop\":\n            this.stop();\n            if (this.options.returnToPrevBounds) {\n              const f = this.options.flyTo ? this._map.flyToBounds : this._map.fitBounds;\n              f.bind(this._map)(this._prevBounds);\n            }\n            break;\n        }\n      } else {\n        if (this.options.returnToPrevBounds) {\n          this._prevBounds = this._map.getBounds();\n        }\n        this.start();\n      }\n\n      this._updateContainerStyle();\n    },\n\n    /**\n     * Starts the plugin:\n     * - activates the engine\n     * - draws the marker (if coordinates available)\n     */\n    start() {\n      this._activate();\n\n      if (this._event) {\n        this._drawMarker(this._map);\n\n        // if we already have a location but the user clicked on the control\n        if (this.options.setView) {\n          this.setView();\n        }\n      }\n      this._updateContainerStyle();\n    },\n\n    /**\n     * Stops the plugin:\n     * - deactivates the engine\n     * - reinitializes the button\n     * - removes the marker\n     */\n    stop() {\n      this._deactivate();\n\n      this._cleanClasses();\n      this._resetVariables();\n\n      this._removeMarker();\n    },\n\n    /**\n     * Keep the control active but stop following the location\n     */\n    stopFollowing() {\n      this._userPanned = true;\n      this._updateContainerStyle();\n      this._drawMarker();\n    },\n\n    /**\n     * This method launches the location engine.\n     * It is called before the marker is updated,\n     * event if it does not mean that the event will be ready.\n     *\n     * Override it if you want to add more functionalities.\n     * It should set the this._active to true and do nothing if\n     * this._active is true.\n     */\n    _activate() {\n      if (!this._active) {\n        this._map.locate(this.options.locateOptions);\n        this._map.fire(\"locateactivate\", this);\n        this._active = true;\n\n        // bind event listeners\n        this._map.on(\"locationfound\", this._onLocationFound, this);\n        this._map.on(\"locationerror\", this._onLocationError, this);\n        this._map.on(\"dragstart\", this._onDrag, this);\n        this._map.on(\"zoomstart\", this._onZoom, this);\n        this._map.on(\"zoomend\", this._onZoomEnd, this);\n\n        if (this.options.showCompass) {\n          const oriAbs = \"ondeviceorientationabsolute\" in window;\n          if (oriAbs || \"ondeviceorientation\" in window) {\n            const _this = this;\n            const deviceorientation = function () {\n              L.DomEvent.on(\n                window,\n                oriAbs ? \"deviceorientationabsolute\" : \"deviceorientation\",\n                _this._onDeviceOrientation,\n                _this\n              );\n            };\n            if (\n              DeviceOrientationEvent &&\n              typeof DeviceOrientationEvent.requestPermission === \"function\"\n            ) {\n              DeviceOrientationEvent.requestPermission().then(function (permissionState) {\n                if (permissionState === \"granted\") {\n                  deviceorientation();\n                }\n              });\n            } else {\n              deviceorientation();\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Called to stop the location engine.\n     *\n     * Override it to shutdown any functionalities you added on start.\n     */\n    _deactivate() {\n      this._map.stopLocate();\n      this._map.fire(\"locatedeactivate\", this);\n      this._active = false;\n\n      if (!this.options.cacheLocation) {\n        this._event = undefined;\n      }\n\n      // unbind event listeners\n      this._map.off(\"locationfound\", this._onLocationFound, this);\n      this._map.off(\"locationerror\", this._onLocationError, this);\n      this._map.off(\"dragstart\", this._onDrag, this);\n      this._map.off(\"zoomstart\", this._onZoom, this);\n      this._map.off(\"zoomend\", this._onZoomEnd, this);\n      if (this.options.showCompass) {\n        this._compassHeading = null;\n        if (\"ondeviceorientationabsolute\" in window) {\n          L.DomEvent.off(window, \"deviceorientationabsolute\", this._onDeviceOrientation, this);\n        } else if (\"ondeviceorientation\" in window) {\n          L.DomEvent.off(window, \"deviceorientation\", this._onDeviceOrientation, this);\n        }\n      }\n    },\n\n    /**\n     * Zoom (unless we should keep the zoom level) and an to the current view.\n     */\n    setView() {\n      this._drawMarker();\n      if (this._isOutsideMapBounds()) {\n        this._event = undefined; // clear the current location so we can get back into the bounds\n        this.options.onLocationOutsideMapBounds(this);\n      } else {\n        if (this._justClicked && this.options.initialZoomLevel !== false) {\n          var f = this.options.flyTo ? this._map.flyTo : this._map.setView;\n          f.bind(this._map)(\n            [this._event.latitude, this._event.longitude],\n            this.options.initialZoomLevel\n          );\n        } else if (this.options.keepCurrentZoomLevel) {\n          var f = this.options.flyTo ? this._map.flyTo : this._map.panTo;\n          f.bind(this._map)([this._event.latitude, this._event.longitude]);\n        } else {\n          var f = this.options.flyTo ? this._map.flyToBounds : this._map.fitBounds;\n          // Ignore zoom events while setting the viewport as these would stop following\n          this._ignoreEvent = true;\n          f.bind(this._map)(this.options.getLocationBounds(this._event), {\n            padding: this.options.circlePadding,\n            maxZoom: this.options.initialZoomLevel || this.options.locateOptions.maxZoom,\n          });\n          L.Util.requestAnimFrame(function () {\n            // Wait until after the next animFrame because the flyTo can be async\n            this._ignoreEvent = false;\n          }, this);\n        }\n      }\n    },\n\n    /**\n     *\n     */\n    _drawCompass() {\n      if (!this._event) {\n        return;\n      }\n\n      const latlng = this._event.latlng;\n\n      if (this.options.showCompass && latlng && this._compassHeading !== null) {\n        const cStyle = this._isFollowing()\n          ? this.options.followCompassStyle\n          : this.options.compassStyle;\n        if (!this._compass) {\n          this._compass = new this.options.compassClass(latlng, this._compassHeading, cStyle).addTo(\n            this._layer\n          );\n        } else {\n          this._compass.setLatLng(latlng);\n          this._compass.setHeading(this._compassHeading);\n          // If the compassClass can be updated with setStyle, update it.\n          if (this._compass.setStyle) {\n            this._compass.setStyle(cStyle);\n          }\n        }\n        //\n      }\n      if (this._compass && (!this.options.showCompass || this._compassHeading === null)) {\n        this._compass.removeFrom(this._layer);\n        this._compass = null;\n      }\n    },\n\n    /**\n     * Draw the marker and accuracy circle on the map.\n     *\n     * Uses the event retrieved from onLocationFound from the map.\n     */\n    _drawMarker() {\n      if (this._event.accuracy === undefined) {\n        this._event.accuracy = 0;\n      }\n\n      const radius = this._event.accuracy;\n      const latlng = this._event.latlng;\n\n      // circle with the radius of the location's accuracy\n      if (this.options.drawCircle) {\n        const style = this._isFollowing()\n          ? this.options.followCircleStyle\n          : this.options.circleStyle;\n\n        if (!this._circle) {\n          this._circle = L.circle(latlng, radius, style).addTo(this._layer);\n        } else {\n          this._circle.setLatLng(latlng).setRadius(radius).setStyle(style);\n        }\n      }\n\n      let distance;\n      let unit;\n      if (this.options.metric) {\n        distance = radius.toFixed(0);\n        unit = this.options.strings.metersUnit;\n      } else {\n        distance = (radius * 3.2808399).toFixed(0);\n        unit = this.options.strings.feetUnit;\n      }\n\n      // small inner marker\n      if (this.options.drawMarker) {\n        const mStyle = this._isFollowing()\n          ? this.options.followMarkerStyle\n          : this.options.markerStyle;\n        if (!this._marker) {\n          this._marker = new this.options.markerClass(latlng, mStyle).addTo(this._layer);\n        } else {\n          this._marker.setLatLng(latlng);\n          // If the markerClass can be updated with setStyle, update it.\n          if (this._marker.setStyle) {\n            this._marker.setStyle(mStyle);\n          }\n        }\n      }\n\n      this._drawCompass();\n\n      const t = this.options.strings.popup;\n      function getPopupText() {\n        if (typeof t === \"string\") {\n          return L.Util.template(t, { distance, unit });\n        } else if (typeof t === \"function\") {\n          return t({ distance, unit });\n        } else {\n          return t;\n        }\n      }\n      if (this.options.showPopup && t && this._marker) {\n        this._marker.bindPopup(getPopupText())._popup.setLatLng(latlng);\n      }\n      if (this.options.showPopup && t && this._compass) {\n        this._compass.bindPopup(getPopupText())._popup.setLatLng(latlng);\n      }\n    },\n\n    /**\n     * Remove the marker from map.\n     */\n    _removeMarker() {\n      this._layer.clearLayers();\n      this._marker = undefined;\n      this._circle = undefined;\n    },\n\n    /**\n     * Unload the plugin and all event listeners.\n     * Kind of the opposite of onAdd.\n     */\n    _unload() {\n      this.stop();\n      this._map.off(\"unload\", this._unload, this);\n    },\n\n    /**\n     * Sets the compass heading\n     */\n    _setCompassHeading(angle) {\n      if (!isNaN(parseFloat(angle)) && isFinite(angle)) {\n        angle = Math.round(angle);\n\n        this._compassHeading = angle;\n        L.Util.requestAnimFrame(this._drawCompass, this);\n      } else {\n        this._compassHeading = null;\n      }\n    },\n\n    /**\n     * If the compass fails calibration just fail safely and remove the compass\n     */\n    _onCompassNeedsCalibration() {\n      this._setCompassHeading();\n    },\n\n    /**\n     * Process and normalise compass events\n     */\n    _onDeviceOrientation(e) {\n      if (!this._active) {\n        return;\n      }\n\n      if (e.webkitCompassHeading) {\n        // iOS\n        this._setCompassHeading(e.webkitCompassHeading);\n      } else if (e.absolute && e.alpha) {\n        // Android\n        this._setCompassHeading(360 - e.alpha);\n      }\n    },\n\n    /**\n     * Calls deactivate and dispatches an error.\n     */\n    _onLocationError(err) {\n      // ignore time out error if the location is watched\n      if (err.code == 3 && this.options.locateOptions.watch) {\n        return;\n      }\n\n      this.stop();\n      this.options.onLocationError(err, this);\n    },\n\n    /**\n     * Stores the received event and updates the marker.\n     */\n    _onLocationFound(e) {\n      // no need to do anything if the location has not changed\n      if (\n        this._event &&\n        this._event.latlng.lat === e.latlng.lat &&\n        this._event.latlng.lng === e.latlng.lng &&\n        this._event.accuracy === e.accuracy\n      ) {\n        return;\n      }\n\n      if (!this._active) {\n        // we may have a stray event\n        return;\n      }\n\n      this._event = e;\n\n      this._drawMarker();\n      this._updateContainerStyle();\n\n      switch (this.options.setView) {\n        case \"once\":\n          if (this._justClicked) {\n            this.setView();\n          }\n          break;\n        case \"untilPan\":\n          if (!this._userPanned) {\n            this.setView();\n          }\n          break;\n        case \"untilPanOrZoom\":\n          if (!this._userPanned && !this._userZoomed) {\n            this.setView();\n          }\n          break;\n        case \"always\":\n          this.setView();\n          break;\n        case false:\n          // don't set the view\n          break;\n      }\n\n      this._justClicked = false;\n    },\n\n    /**\n     * When the user drags. Need a separate event so we can bind and unbind event listeners.\n     */\n    _onDrag() {\n      // only react to drags once we have a location\n      if (this._event && !this._ignoreEvent) {\n        this._userPanned = true;\n        this._updateContainerStyle();\n        this._drawMarker();\n      }\n    },\n\n    /**\n     * When the user zooms. Need a separate event so we can bind and unbind event listeners.\n     */\n    _onZoom() {\n      // only react to drags once we have a location\n      if (this._event && !this._ignoreEvent) {\n        this._userZoomed = true;\n        this._updateContainerStyle();\n        this._drawMarker();\n      }\n    },\n\n    /**\n     * After a zoom ends update the compass and handle sideways zooms\n     */\n    _onZoomEnd() {\n      if (this._event) {\n        this._drawCompass();\n      }\n\n      if (this._event && !this._ignoreEvent) {\n        // If we have zoomed in and out and ended up sideways treat it as a pan\n        if (this._marker && !this._map.getBounds().pad(-0.3).contains(this._marker.getLatLng())) {\n          this._userPanned = true;\n          this._updateContainerStyle();\n          this._drawMarker();\n        }\n      }\n    },\n\n    /**\n     * Compute whether the map is following the user location with pan and zoom.\n     */\n    _isFollowing() {\n      if (!this._active) {\n        return false;\n      }\n\n      if (this.options.setView === \"always\") {\n        return true;\n      } else if (this.options.setView === \"untilPan\") {\n        return !this._userPanned;\n      } else if (this.options.setView === \"untilPanOrZoom\") {\n        return !this._userPanned && !this._userZoomed;\n      }\n    },\n\n    /**\n     * Check if location is in map bounds\n     */\n    _isOutsideMapBounds() {\n      if (this._event === undefined) {\n        return false;\n      }\n      return (\n        this._map.options.maxBounds && !this._map.options.maxBounds.contains(this._event.latlng)\n      );\n    },\n\n    /**\n     * Toggles button class between following and active.\n     */\n    _updateContainerStyle() {\n      if (!this._container) {\n        return;\n      }\n\n      if (this._active && !this._event) {\n        // active but don't have a location yet\n        this._setClasses(\"requesting\");\n      } else if (this._isFollowing()) {\n        this._setClasses(\"following\");\n      } else if (this._active) {\n        this._setClasses(\"active\");\n      } else {\n        this._cleanClasses();\n      }\n    },\n\n    /**\n     * Sets the CSS classes for the state.\n     */\n    _setClasses(state) {\n      if (state == \"requesting\") {\n        removeClasses(this._container, \"active following\");\n        addClasses(this._container, \"requesting\");\n\n        removeClasses(this._icon, this.options.icon);\n        addClasses(this._icon, this.options.iconLoading);\n      } else if (state == \"active\") {\n        removeClasses(this._container, \"requesting following\");\n        addClasses(this._container, \"active\");\n\n        removeClasses(this._icon, this.options.iconLoading);\n        addClasses(this._icon, this.options.icon);\n      } else if (state == \"following\") {\n        removeClasses(this._container, \"requesting\");\n        addClasses(this._container, \"active following\");\n\n        removeClasses(this._icon, this.options.iconLoading);\n        addClasses(this._icon, this.options.icon);\n      }\n    },\n\n    /**\n     * Removes all classes from button.\n     */\n    _cleanClasses() {\n      L.DomUtil.removeClass(this._container, \"requesting\");\n      L.DomUtil.removeClass(this._container, \"active\");\n      L.DomUtil.removeClass(this._container, \"following\");\n\n      removeClasses(this._icon, this.options.iconLoading);\n      addClasses(this._icon, this.options.icon);\n    },\n\n    /**\n     * Reinitializes state variables.\n     */\n    _resetVariables() {\n      // whether locate is active or not\n      this._active = false;\n\n      // true if the control was clicked for the first time\n      // we need this so we can pan and zoom once we have the location\n      this._justClicked = false;\n\n      // true if the user has panned the map after clicking the control\n      this._userPanned = false;\n\n      // true if the user has zoomed the map after clicking the control\n      this._userZoomed = false;\n    },\n  });\n\n  L.control.locate = (options) => new L.Control.Locate(options);\n\n  return LocateControl;\n}, window);\n","import { MapControl } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet.locatecontrol/dist/L.Control.Locate.min.css\";\n// import \"leaflet.locatecontrol\";\nimport \"./L.Control.Locate\";\n\nexport default class Control extends MapControl {\n  createLeafletElement(props) {\n    const { options, startDirectly } = props;\n    const { map } = this.context;\n\n    const _options = {\n      strings: {\n        title: \"Mein Standort\",\n        metersUnit: \"Meter\",\n        feetUnit: \"feet\",\n        popup: \"Ihre reale Position kann bis zu {distance} {unit} von diesem Punkt abweichen.\",\n        outsideMapBoundsMsg: \"Sie befinden sich außerhalb der Kartengrenzen.\",\n      },\n      locateOptions: {\n        enableHighAccuracy: true,\n      },\n      showCompass: true,\n      setView: \"untilPan\",\n      keepCurrentZoomLevel: \"true\",\n      flyTo: true,\n      ...options,\n    };\n\n    const lc = L.control.locate(_options).addTo(map);\n\n    if (startDirectly)\n      setTimeout(() => {\n        lc.start();\n      }, 1000);\n\n    return lc;\n  }\n\n  componentDidMount() {\n    const { map } = this.context;\n    this.leafletElement.addTo(map);\n  }\n}\n","import { useEffect } from \"react\";\n\nimport \"./App.css\";\nimport { useState } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport \"react-cismap/topicMaps.css\";\nimport { md5FetchText, fetchJSON } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\nimport LogConsole from \"react-cismap/tools/LogConsole\";\nimport TopicMapContextProvider from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { getClusterIconCreatorFunction } from \"react-cismap/tools/uiHelper\";\nimport TopicMapComponent from \"react-cismap/topicmaps/TopicMapComponent\";\nimport FeatureCollection from \"react-cismap/FeatureCollection\";\nimport GenericInfoBoxFromFeature from \"react-cismap/topicmaps/GenericInfoBoxFromFeature\";\nimport getGTMFeatureStyler from \"react-cismap/topicmaps/generic/GTMStyler\";\nimport ImprovedLocatorControl from \"./ImprovedLocatorControl\";\nimport StyledWMSTileLayer from \"react-cismap/StyledWMSTileLayer\";\nimport { defaultLayerConf } from \"react-cismap/tools/layerFactory\";\nconst host = \"https://wupp-topicmaps-data.cismet.de\";\n\nconst getGazData = async (setGazData) => {\n  const prefix = \"GazDataForStories\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, host + \"/data/3857/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, host + \"/data/3857/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, host + \"/data/3857/quartiere.json\");\n  sources.pois = await md5FetchText(prefix, host + \"/data/3857/pois.json\");\n  sources.kitas = await md5FetchText(prefix, host + \"/data/3857/kitas.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"pois\",\n    \"kitas\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setGazData(gazData);\n};\n\nconst backgroundModes = [\n  {\n    title: \"Stadtplan\",\n    mode: \"default\",\n    layerKey: \"stadtplan\",\n  },\n  {\n    title: \"Stadtplan (Vektordaten )\",\n    mode: \"default\",\n    layerKey: \"vector2\",\n  },\n  {\n    title: \"Stadtplan (Vektordaten light)\",\n    mode: \"default\",\n    layerKey: \"vector\",\n  },\n\n  { title: \"Luftbildkarte\", mode: \"default\", layerKey: \"lbk\" },\n];\nconst backgroundConfigurations = {\n  lbk: {\n    layerkey: \"cismetText|trueOrtho2020@40\",\n    layerkey_: \"wupp-plan-live@100|trueOrtho2020@75|rvrSchrift@100\",\n    src: \"/images/rain-hazard-map-bg/ortho.png\",\n    title: \"Luftbildkarte\",\n  },\n  stadtplan: {\n    layerkey: \"wupp-plan-live@60\",\n    src: \"/images/rain-hazard-map-bg/citymap.png\",\n    title: \"Stadtplan\",\n  },\n  vector: {\n    layerkey: \"cismetLight\",\n    src: \"/images/rain-hazard-map-bg/citymap.png\",\n    title: \"Stadtplan\",\n  },\n  vector2: {\n    layerkey: \"OMT_OSM_bright\",\n    src: \"/images/rain-hazard-map-bg/citymap.png\",\n    title: \"Stadtplan\",\n  },\n};\nconst baseLayerConf = { ...defaultLayerConf };\n\nbaseLayerConf.namedLayers.cismetLight = {\n  type: \"vector\",\n  style: \"https://omt.map-hosting.de/styles/cismet-light/style.json\",\n  pane: \"backgroundvectorLayers\",\n};\n\nfunction App() {\n  const [gazData, setGazData] = useState([]);\n  useEffect(() => {\n    getGazData(setGazData);\n    // consolere.connect({ server: \"http://localhost:8088\", channel: \"test\" });\n  }, []);\n\n  return (\n    <TopicMapContextProvider\n      baseLayerConf={baseLayerConf}\n      backgroundConfigurations={backgroundConfigurations}\n      backgroundModes={backgroundModes}\n    >\n      <TopicMapComponent locatorControl={true} gazData={gazData}>\n        {/* <LogConsole\n          style={{ textAlign: \"left\" }}\n          ghostModeAvailable={true}\n          minifyAvailable={true}\n        /> */}\n        {/* <ImprovedLocatorControl /> */}\n      </TopicMapComponent>\n    </TopicMapContextProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useRef, useEffect, useState } from \"react\";\nimport maplibregl from \"maplibre-gl\";\nimport \"maplibre-gl/dist/maplibre-gl.css\";\nimport \"./mapLibre.css\";\n\nexport default function Map(props = { opacity: 0.1 }) {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [lng] = useState(7.150764);\n  const [lat] = useState(51.256);\n  const [zoom] = useState(14);\n  let opacity, textOpacity, iconOpacity; // } = props;\n\n  //   opacity = 0.5;\n  //   textOpacity = 1;\n  //   iconOpacity = 1;\n  useEffect(() => {\n    if (map.current) return;\n    map.current = new maplibregl.Map({\n      container: mapContainer.current,\n      style: `https://omt.map-hosting.de/styles/osm-bright/style.json`,\n      center: [lng, lat],\n      zoom: zoom,\n    });\n    console.log(\"map.current\", map.current);\n\n    if (opacity || textOpacity || iconOpacity) {\n      map.current.getStyle().layers.map((layer) => {\n        if (layer.type === \"symbol\") {\n          map.current.setPaintProperty(layer.id, `icon-opacity`, iconOpacity || opacity || 1);\n          map.current.setPaintProperty(layer.id, `text-opacity`, textOpacity || opacity || 1);\n        } else {\n          map.current.setPaintProperty(layer.id, `${layer.type}-opacity`, opacity || 1);\n        }\n      });\n    }\n\n    map.current.on(\"load\", function () {\n      console.log('on\"load\"');\n\n      map.current.addSource(\"wms-test-source\", {\n        type: \"raster\",\n        // use the tiles option to specify a WMS tile source URL\n        // https://maplibre.org/maplibre-gl-js-docs/style-spec/sources/\n        tiles: [\n          \"https://maps.wuppertal.de/deegree/wms?service=WMS&request=GetMap&layers=R102%3Atrueortho202010&styles=&format=image%2Fpng&transparent=false&version=1.1.1&tiled=true&type=wms&cssFilter=undefined&width=256&height=256&srs=EPSG%3A3857&bbox={bbox-epsg-3857}\",\n        ],\n        tileSize: 256,\n      });\n      map.current.addLayer(\n        {\n          id: \"wms-test-layer\",\n          type: \"raster\",\n          opacity: 0.5,\n          source: \"wms-test-source\",\n          paint: {},\n        },\n        \"waterway-name\"\n      );\n      map.current.addLayer(\n        {\n          id: \"3d-buildings\",\n          source: \"openmaptiles\",\n          \"source-layer\": \"building\",\n\n          type: \"fill-extrusion\",\n          minzoom: 15,\n          paint: {\n            \"fill-extrusion-color\": \"#aaa\",\n            \"fill-extrusion-height\": {\n              type: \"identity\",\n              property: \"render_height\",\n            },\n            \"fill-extrusion-base\": {\n              type: \"identity\",\n              property: \"render_min_height\",\n            },\n            \"fill-extrusion-opacity\": 0.6,\n          },\n        },\n        \"waterway-name\"\n      );\n\n      map.current.setPaintProperty(\"wms-test-layer\", \"raster-opacity\", 0.5);\n    });\n\n    map.current.addControl(new maplibregl.NavigationControl(), \"top-left\");\n  });\n\n  return (\n    <div className='map-wrap'>\n      <div ref={mapContainer} className='map' />\n    </div>\n  );\n}\n","import { Link } from \"react-router-dom\";\nimport { Card, Row, Col } from \"antd\";\n\nconst { Meta } = Card;\n\nexport default function Landing() {\n  return (\n    <div>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <h2 style={{ width: \"80%\", margin: 20 }}>\n          Demo Basistechnologie für dig. FußgängerIS (WIP)\n        </h2>\n        <a href={process.env.PUBLIC_URL + \"/#/topicmapWithNewLocator\"}>\n          <Card\n            hoverable\n            style={{ width: 240, margin: 20 }}\n            cover={<img alt='example' src={process.env.PUBLIC_URL + \"/locator.jpeg\"} />}\n          >\n            <Meta title='Standortvisualisierung' description='mit Richtungsanzeige' />\n          </Card>\n        </a>\n        <a href={process.env.PUBLIC_URL + \"/#/turnableTopicMap\"}>\n          <Card\n            hoverable\n            style={{ width: 240, margin: 20 }}\n            cover={<img alt='example' src={process.env.PUBLIC_URL + \"/turnableMap.jpeg\"} />}\n          >\n            <Meta title='TopicMap 3.0?' description='dreh- und kippbare Karte' />\n          </Card>\n        </a>\n        <a href={process.env.PUBLIC_URL + \"/#/qrklima\"}>\n          <Card\n            hoverable\n            style={{ width: 240, margin: 20 }}\n            cover={<img alt='example' src={process.env.PUBLIC_URL + \"/qrklima.jpeg\"} />}\n          >\n            <Meta title='Klimastandorte' description='QR Code enabled' />\n          </Card>\n        </a>\n        {/* <a href='/sensorDemo'>\n          <Card\n            hoverable\n            style={{ width: 240, margin: 20 }}\n            cover={\n              <img alt='example' src='https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png' />\n            }\n          >\n            <Meta title='Kompass auslesen' description='Techdemo' />\n          </Card>\n        </a> */}\n      </div>\n    </div>\n  );\n}\n","import { useEffect } from \"react\";\n\nimport \"./App.css\";\nimport { useState } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport \"react-cismap/topicMaps.css\";\nimport { md5FetchText, fetchJSON } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\n\nimport TopicMapContextProvider from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { getClusterIconCreatorFunction } from \"react-cismap/tools/uiHelper\";\nimport TopicMapComponent from \"react-cismap/topicmaps/TopicMapComponent\";\nimport FeatureCollection from \"react-cismap/FeatureCollection\";\nimport GenericInfoBoxFromFeature from \"react-cismap/topicmaps/GenericInfoBoxFromFeature\";\nimport getGTMFeatureStyler from \"react-cismap/topicmaps/generic/GTMStyler\";\nimport ImprovedLocatorControl from \"./ImprovedLocatorControl\";\n\nimport StyledWMSTileLayer from \"react-cismap/StyledWMSTileLayer\";\nconst host = \"https://wupp-topicmaps-data.cismet.de\";\n\nconst getGazData = async (setGazData) => {\n  const prefix = \"GazDataForStories\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, host + \"/data/3857/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, host + \"/data/3857/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, host + \"/data/3857/quartiere.json\");\n  sources.pois = await md5FetchText(prefix, host + \"/data/3857/pois.json\");\n  sources.kitas = await md5FetchText(prefix, host + \"/data/3857/kitas.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"pois\",\n    \"kitas\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setGazData(gazData);\n};\n\nfunction App() {\n  const [gazData, setGazData] = useState([]);\n  useEffect(() => {\n    getGazData(setGazData);\n  }, []);\n  return (\n    <TopicMapContextProvider>\n      <TopicMapComponent locatorControl={false} gazData={gazData}>\n        <ImprovedLocatorControl />\n      </TopicMapComponent>\n    </TopicMapContextProvider>\n  );\n}\n\nexport default App;\n","const itemFilterFunction = ({ filterState, filterMode }) => {\n  return (item) => {\n    if (filterMode === \"themen\") {\n      return filterState?.themen?.includes(item.thema.id);\n    } else if (filterMode === \"kategorien\") {\n      for (const cat of item.kategorien) {\n        if (filterState?.kategorien?.includes(cat)) {\n          return true;\n        }\n      }\n      return false;\n    } else {\n      return true;\n    }\n  };\n};\nexport default itemFilterFunction;\n","import { addSVGToProps, DEFAULT_SVG } from \"react-cismap/tools/svgHelper\";\nconst convertBPKlimaItemsToFeature = async (itemIn) => {\n  let item = await addSVGToProps(itemIn, (i) => i.thema.icon);\n  const text = item?.standort?.name || \"Kein Standort\";\n  const type = \"Feature\";\n  const selected = false;\n  const geometry = item?.standort?.geojson;\n  const color = item?.thema?.farbe;\n  // item.svg=DEFAULT_SVG.code;\n  item.color = item?.thema.farbe;\n  const info = {\n    header: item.thema.name,\n    title: text,\n    additionalInfo: item?.beschreibung,\n    subtitle: (\n      <span>\n        {item?.standort?.strasse} {item?.standort?.hausnummer}\n        <br />\n        {item?.standort?.plz} {item?.standort?.stadt}\n      </span>\n    ),\n  };\n  item.info = info;\n  item.url = item?.website;\n  if (item.bild) {\n    item.foto = \"https://www.wuppertal.de/geoportal/standort_klima/fotos/\" + item.bild;\n  }\n\n  return {\n    text,\n    type,\n    selected,\n    geometry,\n    crs: {\n      type: \"name\",\n      properties: {\n        name: \"urn:ogc:def:crs:EPSG::25832\",\n      },\n    },\n    properties: item,\n  };\n};\n\nexport default convertBPKlimaItemsToFeature;\n","const factory = ({ featureCollectionContext }) => {\n  const getThemaById = (id) => {\n    const result = featureCollectionContext?.items?.find((item) => item?.thema?.id === id);\n    return result?.thema?.name;\n  };\n\n  let themenstadtplanDesc = \"?\";\n  if (featureCollectionContext?.filteredItems?.length === featureCollectionContext?.items?.length) {\n    themenstadtplanDesc = undefined;\n  } else if (featureCollectionContext?.filterMode === \"themen\") {\n    if (featureCollectionContext?.filterState?.themen?.length <= 2) {\n      const themenIds = featureCollectionContext?.filterState?.themen;\n      const themen = [];\n      for (const id of themenIds) {\n        themen.push(getThemaById(id));\n      }\n\n      themenstadtplanDesc = \"nach Themen gefiltert (nur \" + themen.join(\", \") + \")\";\n    } else {\n      themenstadtplanDesc =\n        \"nach Themen gefiltert (\" +\n        featureCollectionContext?.filterState?.themen?.length +\n        \" Themen)\";\n    }\n  } else if (featureCollectionContext?.filterMode === \"kategorien\") {\n    if (featureCollectionContext?.filterState?.kategorien?.length <= 3) {\n      themenstadtplanDesc =\n        \"nach Kategorien gefiltert (nur \" +\n        featureCollectionContext?.filterState?.kategorien?.join(\", \") +\n        \")\";\n    } else {\n      themenstadtplanDesc =\n        \"nach Kategorien gefiltert (\" +\n        featureCollectionContext?.filterState?.kategorien?.length +\n        \" Kategorien)\";\n    }\n  }\n\n  if (featureCollectionContext?.filteredItems?.length === 0) {\n    return (\n      <div>\n        <b>Keine Klimaorte gefunden!</b> Bitte überprüfen Sie Ihre Filtereinstellungen.\n      </div>\n    );\n  }\n\n  if (themenstadtplanDesc) {\n    return (\n      <div>\n        <b>Meine Klimaorte:</b> {themenstadtplanDesc}\n      </div>\n    );\n  } else {\n    return undefined;\n  }\n};\n\nexport default factory;\n","import { useContext } from \"react\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { getApplicationVersion } from \"./version\";\nimport { version as reactCismapVersion } from \"react-cismap/meta\";\nimport { Link, scroller } from \"react-scroll\";\n\nconst Footer = () => {\n  const { setAppMenuActiveMenuSection } = useContext(UIDispatchContext);\n\n  return (\n    <div style={{ fontSize: \"11px\" }}>\n      <b>Hintergrundkarten</b>: Stadtkarte 2.0 © RVR | True Orthophoto 2020 © Stadt Wuppertal{\" \"}\n      <a\n        className='pleaseRenderAsLink'\n        onClick={() => {\n          setAppMenuActiveMenuSection(\"help\");\n          scroller.scrollTo(\"Datengrundlage\", { containerId: \"myMenu\" });\n        }}\n      >\n        (Details und Nutzungsbedingungen)\n      </a>\n      <br />\n      <div>\n        <b>\n          {document.title} v{getApplicationVersion()}\n        </b>\n        :{\" \"}\n        <a href='https://cismet.de/' target='_cismet'>\n          cismet GmbH\n        </a>{\" \"}\n        auf Basis von{\" \"}\n        <a href='http://leafletjs.com/' target='_more'>\n          Leaflet\n        </a>{\" \"}\n        und{\" \"}\n        <a href='https://cismet.de/#refs' target='_cismet'>\n          cids | react-cismap v{reactCismapVersion}\n        </a>{\" \"}\n        |{\" \"}\n        <a\n          target='_blank'\n          rel='noopener noreferrer'\n          href='https://cismet.de/datenschutzerklaerung.html'\n        >\n          Datenschutzerklärung (Privacy Policy)\n        </a>\n      </div>\n    </div>\n  );\n};\nexport default Footer;\n","const APPERSION = \"%APPLICATION_VERSION%\";\nconst APPHASH = \"#%APPLICATION_HASH%\";\n\nexport const getApplicationVersion = () => {\n  /*eslint-disable no-useless-concat*/\n  if (APPERSION === \"%APPLICATION\" + \"_\" + \"VERSION%\") {\n    return \"dev-hot-reload\";\n  } else {\n    return APPERSION;\n  }\n};\nexport const getApplicationHash = () => {\n  if (APPHASH === \"%APPLICATION\" + \"_\" + \"HASH%\") {\n    return \"#dev-hot-reload\";\n  } else {\n    return APPHASH;\n  }\n};\n","import { useContext } from \"react\";\nimport {\n  FeatureCollectionContext,\n  FeatureCollectionDispatchContext,\n} from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { getSimpleHelpForTM } from \"react-cismap/tools/uiHelper\";\nimport { Link } from \"react-scroll\";\nimport ModalApplicationMenu from \"react-cismap/topicmaps/menu/ModalApplicationMenu\";\nimport Section from \"react-cismap/topicmaps/menu/Section\";\nimport FilterPanel from \"react-cismap/topicmaps/menu/FilterPanel\";\nimport DefaultSettingsPanel from \"react-cismap/topicmaps/menu/DefaultSettingsPanel\";\nimport ConfigurableDocBlocks from \"react-cismap/topicmaps/ConfigurableDocBlocks\";\nimport MenuFooter from \"./MenuFooter\";\nimport CustomizationContextProvider from \"react-cismap/contexts/CustomizationContextProvider\";\n\nimport Icon from \"react-cismap/commons/Icon\";\nimport { addSVGToProps } from \"react-cismap/tools/svgHelper\";\n\nexport const getFilterInfo = (items) => {\n  let kategorien = [];\n  const katValues = [];\n  let themen = [];\n  const themenValues = [];\n\n  for (const item of items || []) {\n    for (const kat of item.kategorien) {\n      if (!kategorien.includes(kat)) {\n        katValues.push({ key: kat });\n        kategorien.push(kat);\n      }\n    }\n    if (!themen.includes(item.thema.id)) {\n      themen.push(item.thema.id);\n      themenValues.push({ key: item.thema.id, title: item.thema.name, color: item.thema.farbe });\n    }\n  }\n\n  themenValues.sort((a, b) => a.title.localeCompare(b.title));\n  katValues.sort((a, b) => a.key.localeCompare(b.key));\n\n  themen = [];\n\n  for (const t of themenValues) {\n    themen.push(t.key);\n  }\n  kategorien = [];\n\n  for (const k of katValues) {\n    kategorien.push(k.key);\n  }\n  return { kategorien, katValues, themen, themenValues };\n};\n\nconst MyMenu = () => {\n  const { setAppMenuActiveMenuSection } = useContext(UIDispatchContext);\n  const { filterState, filterMode, filteredItems, shownFeatures } =\n    useContext(FeatureCollectionContext);\n  const { setFilterState, setFilterMode } = useContext(FeatureCollectionDispatchContext);\n\n  const { items } = useContext(FeatureCollectionContext);\n\n  const { kategorien, katValues, themen, themenValues } = getFilterInfo(items);\n\n  const filterConfiguration = {\n    mode: \"tabs\", // list or tabs\n    filters: [\n      {\n        title: \"Themen\",\n        key: \"themen\",\n        icon: \"folder\",\n        type: \"tags\", //\"checkBoxes\",\n        values: themenValues,\n        setAll: () => {\n          setFilterState({ ...filterState, themen });\n        },\n        setNone: () => {\n          setFilterState({ ...filterState, themen: [] });\n        },\n        colorizer: (item, selected) => (selected ? item.color : \"#eeeeee\"),\n      },\n      {\n        title: \"Kategorien\",\n        key: \"kategorien\",\n        icon: \"tags\",\n        type: \"tags\",\n        values: katValues,\n        setAll: () => {\n          setFilterState({ ...filterState, kategorien });\n        },\n        setNone: () => {\n          setFilterState({ ...filterState, kategorien: [] });\n        },\n      },\n    ],\n  };\n\n  if ((filterState === undefined) & (items !== undefined)) {\n    setFilterState({ kategorien, themen });\n  }\n  if ((filterMode === undefined) & (items !== undefined)) {\n    setFilterMode(\"themen\");\n  }\n  const topicMapTitle = \"Hintergrund\";\n  const simpleHelp = {\n    content: `Die Möglichkeiten zum Klima- und Umweltschutz werden aktuell global diskutiert, wobei bereits \n              auf kommunaler Ebene viele Akteure und Einrichtungen an deren Umsetzung beteiligt sind. \n              An diesen \"Klimaorten\" wird das Thema Klimaschutz praktiziert und vermittelt; hier wird der \n              Klimaschutz für die Bürger\\\\*innen erlebbar. Viele dieser Klimaorte sind im Rahmen von innovativen \n              Projekten durch den Wissenstransfer und das Engagement von Unternehmen, Vereinen, Verbänden sowie \n              Quartiersbewohner\\\\*innen entstanden, die sich aktiv für Lösungen zum Klima- und Umweltschutz in ihrem \n              Quartier und für die Stadt Wuppertal einsetzen. Zu den zielführenden Projekten gehören z.B. Wuppertals \n              Klimasiedlungen, Anlagen zur effizienten und/oder regenerativen Energieerzeugung, Projekte der Verkehrswende \n              sowie der Klima- und Umweltbildung, an denen zahlreiche Akteure mitwirken und mitgestalten.`,\n  };\n\n  const getFilterHeader = () => {\n    const count = filteredItems?.length || 0;\n\n    let term;\n    if (count === 1) {\n      term = \"Standort\";\n    } else {\n      term = \"Standorte\";\n    }\n\n    return `Meine Klimaorte (${count} ${term} gefunden, davon ${\n      shownFeatures?.length || \"0\"\n    } in der Karte)`;\n  };\n  const configurableDocBlocks = getSimpleHelpForTM(topicMapTitle, simpleHelp);\n  configurableDocBlocks[0].configs.splice(6, 0, {\n    title: \"Filtern\",\n    bsStyle: \"warning\",\n    contentBlockConf: {\n      type: \"REACTCOMP\",\n      content: (\n        <div>\n          <p>\n            Im Bereich &quot;<strong>Meine Klimaorte</strong>&quot; können Sie im Anwendungsmenü{\" \"}\n            <Icon name='bars' /> die in der Karte angezeigten Klimaorte so ausdünnen, dass nur die\n            für Sie interessanten Orte übrig bleiben. Dabei umfasst die Filterung die Angebote an\n            den Klimastandorten, wobei sich ein Angebot aus einem Thema und einer Kategorie ergibt.\n            Standardmäßig sind die Einstellungen hier so gesetzt, dass alle verfügbaren Klimaorte\n            angezeigt werden.\n          </p>\n          <p>\n            Ihnen stehen somit zwei Filterkriterien zur Verfügung: \"Themen\" und \"Kategorien\".\n            Innerhalb dieser Kriterien können sie in einer alphabetisch sortieren Menge an\n            Schlagworten (Tags) bestimmte Begriffe per Mausklick selektieren bzw. deselektieren; die\n            Auswahl aller bzw. keines der Schlagworte erfolgt über die Schaltfläche{\" \"}\n            <a className='renderAsLink'>alle</a> bzw. <a className='renderAsLink'>keine</a>.\n          </p>\n          <p>\n            Ihre Einstellungen werden direkt in der blauen Titelzeile des Bereichs \"\n            <strong>Meine Klimaorte</strong>\" und in dem Donut-Diagramm, das Sie rechts neben oder\n            unter den Filteroptionen finden, ausgewertet. Die Titelzeile zeigt die Gesamtanzahl der\n            Klimaorte, die den von Ihnen gesetzten Filterbedingungen entsprechen. Das Donut-Diagramm\n            zeigt zusätzlich die Verteilung der Klimaorte entsprechend der Filterkriterien \"Themen\"\n            oder \"Kategorien\". Bewegen Sie dazu den Mauszeiger auf eines der farbigen Segmente des\n            Diagramms. Die Farben des Donut-Diagramms entsprechen den farbigen Hintergründen der\n            Schlagworte aus dem Filterkriterium \"Themen\".\n          </p>\n        </div>\n      ),\n    },\n  });\n\n  return (\n    <CustomizationContextProvider\n      customizations={{\n        inKartePositionieren: {\n          listWithSymbols: (\n            <p>\n              Durch das in der Auswahlliste vorangestellte Symbol erkennen Sie, ob es sich bei einem\n              Treffer um einen{\" \"}\n              <NW>\n                <Icon name='circle' /> Stadtbezirk\n              </NW>\n              , ein{\" \"}\n              <NW>\n                <Icon name='pie-chart' /> Quartier\n              </NW>\n              , eine{\" \"}\n              <NW>\n                <Icon name='home' /> Adresse\n              </NW>\n              , eine{\" \"}\n              <NW>\n                <Icon name='road' /> Straße ohne Hausnummern\n              </NW>\n              , eine{\" \"}\n              <NW>\n                <Icon name='child' /> Kindertageseinrichtung\n              </NW>\n              , eine{\" \"}\n              <NW>\n                <Icon name='graduation-cap' /> Schule\n              </NW>{\" \"}\n              oder einen{\" \"}\n              <NW>\n                <Icon name='sun' /> Klimaort\n              </NW>{\" \"}\n              handelt.\n            </p>\n          ),\n        },\n        fachobjekteAuswaehlen: {\n          furtherExplanationOfClickableContent: \" (Signaturen oder dunkelblaue Fahrradtrassen)\",\n        },\n        hintergrund: {\n          additionalDatasources: (\n            <div>\n              <ul>\n                <li>\n                  <strong>Fernwärme</strong>: Kartendienst (WMS) der Stadt Wuppertal in\n                  Zusammenarbeit mit der{\" \"}\n                  <a\n                    target='_wsw'\n                    href='https://www.wsw-online.de/wsw-energie-wasser/privatkunden/produkte/fernwaerme/talwaerme-wuppertal/'\n                  >\n                    WSW GmbH\n                  </a>\n                  . Datengrundlage: Fernwärmeleitungen der Wuppertaler Stadtwerke GmbH (Stand\n                  02.2021) mit einer Puffergröße von 10 m. ©{\" \"}\n                  <a target='_wsw' href='https://www.wsw-online.de/impressum/'>\n                    Wuppertaler Stadtwerke GmbH\n                  </a>\n                  .\n                </li>\n              </ul>\n              <div>\n                Zusätzlich stellt die Klimaortkarte Wuppertal die Daten der{\" \"}\n                <a\n                  target='_opendata'\n                  href='https://offenedaten-wuppertal.de/dataset/klimaorte-wuppertal'\n                >\n                  Klimaorte\n                </a>{\" \"}\n                und eine Auswahl der{\" \"}\n                <a\n                  target='_opendata'\n                  href='https://offenedaten-wuppertal.de/dataset/radrouten-wuppertal'\n                >\n                  Radrouten\n                </a>{\" \"}\n                (mit 1,5 Meter Puffer) aus dem Open-Data-Angebot der Stadt Wuppertal dar.\n              </div>\n            </div>\n          ),\n        },\n      }}\n    >\n      <ModalApplicationMenu\n        menuIcon={\"bars\"}\n        menuTitle={\"Meine Klimaorte, Einstellungen und Kompaktanleitung\"}\n        menuFooter={<MenuFooter />}\n        menuIntroduction={\n          <span>\n            Benutzen Sie die Auswahlmöglichkeiten unter{\" \"}\n            <Link\n              className='useAClassNameToRenderProperLink'\n              to='filter'\n              containerId='myMenu'\n              smooth={true}\n              delay={100}\n              onClick={() => setAppMenuActiveMenuSection(\"filter\")}\n            >\n              Meine Klimaorte\n            </Link>\n            , um die in der Karte angezeigten vorbildlichen Klimaorte auf die für Sie relevanten\n            Themen zu beschränken. Über{\" \"}\n            <Link\n              className='useAClassNameToRenderProperLink'\n              to='settings'\n              containerId='myMenu'\n              smooth={true}\n              delay={100}\n              onClick={() => setAppMenuActiveMenuSection(\"settings\")}\n            >\n              Einstellungen\n            </Link>{\" \"}\n            können Sie die Darstellung der Hintergrundkarte und der klimarelevanten Themen an Ihre\n            Interesse anpassen. Wählen Sie die{\" \"}\n            <Link\n              className='useAClassNameToRenderProperLink'\n              to='help'\n              containerId='myMenu'\n              smooth={true}\n              delay={100}\n              onClick={() => setAppMenuActiveMenuSection(\"help\")}\n            >\n              Kompaktanleitung\n            </Link>{\" \"}\n            für detailliertere Bedienungsinformationen.\n          </span>\n        }\n        menuSections={[\n          <Section\n            key='filter'\n            sectionKey='filter'\n            sectionTitle={getFilterHeader()}\n            sectionBsStyle='primary'\n            sectionContent={<FilterPanel filterConfiguration={filterConfiguration} />}\n          />,\n          <DefaultSettingsPanel key='settings' />,\n          <Section\n            key='help'\n            sectionKey='help'\n            sectionTitle='Kompaktanleitung'\n            sectionBsStyle='default'\n            sectionContent={<ConfigurableDocBlocks configs={configurableDocBlocks} />}\n          />,\n        ]}\n      />\n    </CustomizationContextProvider>\n  );\n};\nexport default MyMenu;\nconst NW = (props) => {\n  return <span style={{ whiteSpace: \"nowrap\" }}>{props.children}</span>;\n};\n","import React, { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport SecondaryInfoPanelSection from \"react-cismap/topicmaps/SecondaryInfoPanelSection\";\nimport SecondaryInfo from \"react-cismap/topicmaps/SecondaryInfo\";\nimport { getApplicationVersion } from \"./version\";\nimport { version as reactCismapVersion } from \"react-cismap/meta\";\n\nconst InfoPanel = () => {\n  const { selectedFeature, items } = useContext(FeatureCollectionContext);\n\n  const angebot = selectedFeature?.properties;\n  const footer = (\n    <div style={{ fontSize: \"11px\" }}>\n      <div>\n        <b>\n          {document.title} v{getApplicationVersion()}\n        </b>\n        :{\" \"}\n        <a href='https://cismet.de/' target='_cismet'>\n          cismet GmbH\n        </a>{\" \"}\n        auf Basis von{\" \"}\n        <a href='http://leafletjs.com/' target='_more'>\n          Leaflet\n        </a>{\" \"}\n        und{\" \"}\n        <a href='https://cismet.de/#refs' target='_cismet'>\n          cids | react-cismap v{reactCismapVersion}\n        </a>{\" \"}\n        |{\" \"}\n        <a\n          target='_blank'\n          rel='noopener noreferrer'\n          href='https://cismet.de/datenschutzerklaerung.html'\n        >\n          Datenschutzerklärung (Privacy Policy)\n        </a>\n      </div>\n    </div>\n  );\n  if (angebot !== undefined) {\n    let foto;\n    if (angebot.bild !== undefined) {\n      foto = \"https://www.wuppertal.de/geoportal/standort_klima/fotos/\" + angebot.bild;\n    }\n\n    const weitereAngebote = items.filter(\n      (testItem) => testItem?.standort.id === angebot.standort.id && testItem.id !== angebot.id\n    );\n    //data structure for \"weitere Angebote\"\n    // gruppenwechsel for thema\n\n    const addOffers = {};\n    for (const ang of weitereAngebote) {\n      if (addOffers[ang.thema.name] === undefined) {\n        addOffers[ang.thema.name] = [];\n      }\n      addOffers[ang.thema.name].push(ang.kategorien);\n    }\n\n    const subSections = [\n      <SecondaryInfoPanelSection\n        key='standort'\n        bsStyle='info'\n        header={\"Standort: \" + angebot?.standort?.name}\n      >\n        <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n          {angebot?.standort && (\n            <b>\n              {angebot?.standort?.strasse} {angebot?.standort?.hausnummer}\n              <br />\n              {angebot?.standort?.plz} {angebot?.standort?.stadt}\n              <br />\n            </b>\n          )}\n\n          {angebot?.standort?.beschreibung && (\n            <div>\n              {angebot?.standort?.beschreibung}\n              <br />\n            </div>\n          )}\n          {angebot?.standort?.bemerkung && (\n            <div>\n              {angebot?.standort?.bemerkung} <br />\n            </div>\n          )}\n\n          {angebot?.standort?.kommentar && (\n            <div>\n              <br></br> <i>{angebot?.standort?.kommentar} </i>\n            </div>\n          )}\n\n          {angebot?.standort?.erreichbarkeit && (\n            <div>\n              <br></br> Erreichbarkeit über {angebot?.standort?.erreichbarkeit}\n            </div>\n          )}\n        </div>\n      </SecondaryInfoPanelSection>,\n    ];\n    let first = true;\n    if (weitereAngebote.length > 0) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='weitereAngebote'\n          header='Weitere Angebote an diesem Standort:'\n          bsStyle='success'\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <table border={0} style={{ xwidth: \"100%\" }}>\n              <tbody>\n                {Object.keys(addOffers).map((key, index) => {\n                  let separator = null;\n                  if (first !== true) {\n                    separator = (\n                      <tr colspan={2}>\n                        <td\n                          style={{\n                            paddingLeft: 5,\n                            paddingright: 5,\n                            borderBottom: \"1px solid #dddddd\",\n                          }}\n                        ></td>\n                        <td\n                          style={{\n                            paddingLeft: 5,\n                            paddingright: 5,\n                            borderBottom: \"1px solid #dddddd\",\n                          }}\n                        ></td>\n                      </tr>\n                    );\n                  }\n\n                  first = false;\n                  return (\n                    <>\n                      {separator}\n                      <tr style={{ paddingBottom: 10 }} key={\"addAng\" + index}>\n                        <td style={{ verticalAlign: \"top\", padding: 5 }} key={\"addAng.L.\" + index}>\n                          {key}:\n                        </td>\n                        <td style={{ verticalAlign: \"top\", padding: 5 }} key={\"addAng.R.\" + index}>\n                          {addOffers[key].map((val, index) => {\n                            return <div key={\"kategorien.\" + index}>{val.join(\", \")}</div>;\n                          })}\n                        </td>\n                      </tr>\n                    </>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n          {/* <pre>{JSON.stringify(addOffers, null, 2)}</pre> */}\n        </SecondaryInfoPanelSection>\n      );\n    }\n\n    let minHeight4MainSextion = undefined;\n    if (foto !== undefined) {\n      minHeight4MainSextion = 250;\n    }\n    return (\n      <SecondaryInfo\n        titleIconName='info-circle'\n        title={\"Datenblatt: \" + angebot.kategorien.join(\", \")}\n        mainSection={\n          <div style={{ width: \"100%\", minHeight: minHeight4MainSextion }}>\n            {foto !== undefined && (\n              <img\n                alt='Bild'\n                style={{\n                  paddingLeft: 10,\n                  paddingRight: 10,\n                  float: \"right\",\n                  paddingBottom: \"5px\",\n                }}\n                src={foto}\n                width='250'\n              />\n            )}\n            <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n              {angebot.beschreibung && (\n                <b>\n                  {angebot.beschreibung}\n                  <br />\n                </b>\n              )}\n              {angebot.bemerkung && (\n                <div>\n                  {angebot.bemerkung} <br />\n                </div>\n              )}\n              {angebot.kommentar && (\n                <div>\n                  <br></br>\n                  <i>{angebot.kommentar} </i>\n                </div>\n              )}\n            </div>\n          </div>\n        }\n        subSections={subSections}\n        footer={footer}\n      />\n    );\n  } else {\n    return null;\n  }\n};\nexport default InfoPanel;\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport { useContext, useEffect, useState } from \"react\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport FeatureCollection from \"react-cismap/FeatureCollection\";\nimport { md5FetchText } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\nimport \"react-cismap/topicMaps.css\";\nimport GenericInfoBoxFromFeature from \"react-cismap/topicmaps/GenericInfoBoxFromFeature\";\nimport InfoBoxFotoPreview from \"react-cismap/topicmaps/InfoBoxFotoPreview\";\n\nimport TopicMapComponent from \"react-cismap/topicmaps/TopicMapComponent\";\nimport \"./App.css\";\nimport MyMenu, { getFilterInfo } from \"./Menu\";\nimport InfoPanel from \"./SecondaryInfo\";\n\nimport { dataHost } from \"./App\";\nimport {\n  FeatureCollectionContext,\n  FeatureCollectionDispatchContext,\n} from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport {\n  TopicMapContext,\n  TopicMapDispatchContext,\n} from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { removeQueryPart } from \"react-cismap/tools/routingHelper\";\nimport { LightBoxDispatchContext } from \"react-cismap/contexts/LightBoxContextProvider\";\nconst getGazData = async (setGazData) => {\n  const prefix = \"GazDataForStories\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, dataHost + \"/data/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, dataHost + \"/data/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, dataHost + \"/data/quartiere.json\");\n  sources.bpklimastandorte = await md5FetchText(prefix, dataHost + \"/data/bpklimastandorte.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"bpklimastandorte\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setGazData(gazData);\n};\n\nfunction KlimaorteMap() {\n  const { setSelectedFeatureByPredicate, setFilterState } = useContext(\n    FeatureCollectionDispatchContext\n  );\n  const lightBoxDispatchContext = useContext(LightBoxDispatchContext);\n  const { selectedFeature, items, shownFeatures, filterState } =\n    useContext(FeatureCollectionContext);\n  const { zoomToFeature } = useContext(TopicMapDispatchContext);\n  const { history } = useContext(TopicMapContext);\n\n  const [gazData, setGazData] = useState([]);\n  useEffect(() => {\n    getGazData(setGazData);\n  }, []);\n\n  useEffect(() => {\n    const handleShow = (search) => {\n      //check whether shownFeatures is undefined\n      //then the map is not ready wait for it\n      if (shownFeatures === undefined || items === undefined) {\n        return;\n      }\n\n      const show = new URLSearchParams(search).get(\"show\");\n      const foundShow = show != null;\n      if (foundShow === true) {\n        //check whether the feature is already shown\n        const foundFeature = shownFeatures.find((f) => f.properties.standort.id === parseInt(show));\n        if (foundFeature !== undefined) {\n          setSelectedFeatureByPredicate((feature) => {\n            try {\n              return parseInt(feature.properties.standort.id) === parseInt(show);\n            } catch (e) {\n              return false;\n            }\n          });\n          history.push(removeQueryPart(search, \"show\"));\n        } else {\n          //check whether the feature is in the items list\n          const foundFeature = items.find((i) => i.standort.id === parseInt(show));\n          if (foundFeature !== undefined) {\n            const { themen } = getFilterInfo(items);\n            setFilterState({ ...filterState, themen });\n            // reset the filter\n          } else {\n            console.log(\"Objekt mit Standort.ID=\" + show + \" nicht gefunden\");\n            history.push(removeQueryPart(search, \"show\"));\n          }\n        }\n\n        // setFilterState({ kampagnen: [] });\n        // setAppMenuVisible(true);\n        // setTimeout(() => {\n        //   setAppMenuActiveMenuSection(\"filter\");\n        // }, 50);\n      }\n    };\n\n    handleShow(history.location.search);\n    return history.listen(() => {\n      handleShow(history.location.search);\n    });\n  }, [history, shownFeatures, items]);\n\n  let weitereAngebote;\n  const angebot = selectedFeature?.properties;\n  let moreDataAvailable = false;\n  if (angebot) {\n    weitereAngebote = items.filter(\n      (testItem) => testItem?.standort.id === angebot.standort.id && testItem.id !== angebot.id\n    );\n    moreDataAvailable =\n      weitereAngebote.length > 0 ||\n      selectedFeature?.properties?.bemerkung !== undefined ||\n      selectedFeature?.properties?.kommentar !== undefined;\n  }\n\n  const linkProduction = new URLSearchParams(history.location.search).get(\"linkProduction\");\n  const linkProductionEnabled = linkProduction != null;\n\n  let secondaryInfoBoxElements = [\n    <InfoBoxFotoPreview\n      lightBoxDispatchContext={lightBoxDispatchContext}\n      currentFeature={selectedFeature}\n    />,\n  ];\n\n  if (linkProductionEnabled) {\n    secondaryInfoBoxElements.push(\n      <a\n        href={window.location.href + \"&show=\" + selectedFeature?.properties?.standort?.id}\n        target='_blank'\n        rel='noreferrer'\n      >\n        π\n      </a>\n    );\n  }\n\n  return (\n    <TopicMapComponent\n      applicationMenuTooltipString='Filter | Einstellungen | Anleitung'\n      locatorControl={true}\n      modalMenu={<MyMenu />}\n      gazData={gazData}\n      gazetteerSearchPlaceholder='Klimaort | Stadtteil | Adresse'\n      infoBox={\n        <GenericInfoBoxFromFeature\n          pixelwidth={400}\n          config={{\n            displaySecondaryInfoAction: moreDataAvailable,\n            city: \"Wuppertal\",\n            navigator: {\n              noun: {\n                singular: \"Klimaort\",\n                plural: \"Klimaorte\",\n              },\n            },\n            noCurrentFeatureTitle: \"Keine Klimaorte gefunden\",\n            noCurrentFeatureContent: \"\",\n          }}\n          secondaryInfoBoxElements={secondaryInfoBoxElements}\n        />\n      }\n      secondaryInfo={<InfoPanel />}\n      gazetteerHitTrigger={(hits) => {\n        if (Array.isArray(hits) && hits[0]?.more?.id) {\n          setSelectedFeatureByPredicate((feature) => {\n            try {\n              const check = parseInt(feature.properties.standort.id) === hits[0].more.id;\n              if (check === true) {\n                zoomToFeature(feature);\n              }\n              return check;\n            } catch (e) {\n              return false;\n            }\n          });\n        }\n      }}\n    >\n      <FeatureCollection />\n    </TopicMapComponent>\n  );\n}\n\nexport default KlimaorteMap;\n","import \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport { MappingConstants } from \"react-cismap\";\nimport Icon from \"react-cismap/commons/Icon\";\nimport TopicMapContextProvider from \"react-cismap/contexts/TopicMapContextProvider\";\nimport StyledWMSTileLayer from \"react-cismap/StyledWMSTileLayer\";\nimport { getClusterIconCreatorFunction } from \"react-cismap/tools/uiHelper\";\nimport \"react-cismap/topicMaps.css\";\nimport getGTMFeatureStyler from \"react-cismap/topicmaps/generic/GTMStyler\";\nimport \"./App.css\";\nimport itemFilterFunction from \"./helper/filter\";\nimport convertBPKlimaItemsToFeature from \"./helper/itemConverter\";\nimport titleFactory from \"./helper/titleFactory\";\nimport KlimaorteMap from \"./KlimaorteMap\";\n\nexport const dataHost = \"https://wupp-topicmaps-data.cismet.de\";\n\nfunction App() {\n  return (\n    <TopicMapContextProvider\n      appKey='BestPracticeKlimaschutzWuppertal.TopicMap'\n      featureTooltipFunction={(feature) => feature?.text}\n      featureItemsURL={dataHost + \"/data/bpklima.data.json\"}\n      referenceSystemDefinition={MappingConstants.proj4crs25832def}\n      mapEPSGCode='25832'\n      referenceSystem={MappingConstants.crs25832}\n      getFeatureStyler={getGTMFeatureStyler}\n      convertItemToFeature={convertBPKlimaItemsToFeature}\n      clusteringOptions={{\n        iconCreateFunction: getClusterIconCreatorFunction(30, (props) => props.color),\n      }}\n      clusteringEnabled={true}\n      itemFilterFunction={itemFilterFunction}\n      titleFactory={titleFactory}\n      classKeyFunction={(item) => item.thema?.name}\n      getColorFromProperties={(item) => item?.thema?.farbe}\n      additionalLayerConfiguration={{\n        fernwaerme: {\n          title: (\n            <span>\n              Fernwärme{\" \"}\n              <Icon\n                style={{\n                  color: \"#EEB48C\",\n                  width: \"30px\",\n                  textAlign: \"center\",\n                }}\n                name={\"circle\"}\n              />\n            </span>\n          ),\n          initialActive: true,\n          layer: (\n            <StyledWMSTileLayer\n              key={\"fernwaermewsw\"}\n              url='https://maps.wuppertal.de/deegree/wms'\n              layers='fernwaermewsw '\n              format='image/png'\n              tiled='true'\n              transparent='true'\n              maxZoom={19}\n              opacity={0.7}\n            />\n          ),\n        },\n      }}\n    >\n      <KlimaorteMap />\n    </TopicMapContextProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport { HashRouter as Router, Routes, Route, Link } from \"react-router-dom\";\nimport LibreMap from \"./LibreMap\";\nimport Landing from \"./Landing\";\nimport \"antd/dist/antd.css\";\nimport SensorMap from \"./SensorMap\";\nimport Klima from \"./klima/App\";\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <div className='App'>\n        <Routes>\n          <Route path='/' element={<Landing></Landing>}></Route>\n\n          <Route path='/turnableTopicMap' element={<LibreMap />}></Route>\n\n          <Route path='/topicmapWithNewLocator' element={<App />}></Route>\n\n          <Route path='/sensorDemo' element={<SensorMap />}></Route>\n          <Route path='/qrklima' element={<Klima />}></Route>\n        </Routes>\n      </div>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}